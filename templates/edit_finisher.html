{% extends "base.html" %}
{% block content %}

<!-- Edit finisher form -->

{{ finisher.finisher_name }}

<div>
  <form method="POST" action="{{ url_for('edit_finisher', finisher_id=finisher._id) }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <div class="row">
      <div class="input-field col s6">
        <input name="finisher_name" type="text" class="validate" value="{{ finisher.finisher_name}}" required />
        <label for="finisher_name">Name your finisher:</label>
      </div>
      <div class="input-field col s6">
        <select name="categories" required>
          <option value="" disabled>Choose finisher type</option>
          {% for category in categories %}
            {% if category.category_name == finisher.category_name %}
                    <option value="{{ category.category_name }}" selected>{{ category.category_name }}</option>
                {% else %}
                    <option value="{{ category.category_name }}">{{ category.category_name }}</option>
            {% endif %}            
          {% endfor %}
        </select>
        <label for="">Select category</label>
      </div>
    </div>

    <!-- Exercise 1 -->
    {% for exercises in finisher.exercises %}
    <div class="row">
      <div class="input-field col s6">
        <input name="exercise_{{ loop.index }}" type="text" class="validate" value="{{ exercises.exercise_name }}" required />
        <label for="exercise">Exercise {{ loop.index }}:</label>
      </div>
      <div class="input-field col s3">
        <input name="reps_{{ loop.index }}" type="number" class="validate" value="{{ exercises.set }}" required />
        <label for="reps_{{ loop.index }}">for:</label>
      </div>
      <div class="input-field col s3">
        <select id="exercise_set_type_select" name="set_type_{{ loop.index }}" required>
          <option value="" disabled>Choose your option</option>
          {% if exercises.set_type == "reps" %}
            <option value="reps" selected>reps</option>
            <option value="seconds">seconds</option>
            <option value="metres">metres</option>
          {% elif exercises.set_type == "seconds" %}  
            <option value="reps">reps</option>
            <option value="seconds" selected>seconds</option>
            <option value="metres">metres</option>
          {% else %}
            <option value="reps">reps</option>
            <option value="seconds">seconds</option>
            <option value="metres" selected>metres</option>
          {% endif %}    
        </select>
        <label for="set_type_{{ loop.index }}">Reps/time/distance:</label>
      </div>
    </div>
    {% endfor %}

    <!--  Instructions, time limit and submit button -->

    <div class="row">
      <div class="input-field col s12">
        <textarea
          name="instructions"
          class="materialize-textarea"
          required
        >{{ finisher.instructions }}</textarea>
        <label for="instructions">Instructions:</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s4">
        <div class="switch">
          <label for="time_limit_toggle">Time limit?</label>
          <label>
            Off
            {% if finisher.time_limit_toggle == "on" %}
                <input
                name="time_limit_toggle"
                id="time_limit_toggle"
                type="checkbox"
                checked
                />
            {% else %}
                <input
                name="time_limit_toggle"
                id="time_limit_toggle"
                type="checkbox"
                />
            {% endif %}
            <span class="lever"></span>
            On
          </label>
        </div>
      </div>
      <div class="input-field col s4">
        <input
          name="time_limit"
          id="time_limit"
          type="number"
          class="validate"
          value="{{ finisher.time_limit }}"
        />
        <label for="time_limit">Time limit:</label>
      </div>
    </div>
    <button type="submit" class="col s12 btn-large">Edit and add finisher</button>
  </form>
</div>

{% endblock %}